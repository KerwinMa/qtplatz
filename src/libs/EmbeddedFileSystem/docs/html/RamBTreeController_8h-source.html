<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>EmbeddedFileSystem: RamBTreeController.h Source File</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.3.4 -->
<div class="qindex"><a class="qindex" href="index.html">Main&nbsp;Page</a> | <a class="qindex" href="hierarchy.html">Class&nbsp;Hierarchy</a> | <a class="qindex" href="annotated.html">Class&nbsp;List</a> | <a class="qindex" href="files.html">File&nbsp;List</a> | <a class="qindex" href="functions.html">Class&nbsp;Members</a></div>
<h1>RamBTreeController.h</h1><div class="fragment"><pre>00001 
00002 
00003 
00004 
00005 
00006 
00007 
00008 
00009 <span class="preprocessor">#ifndef __RamBTreeController_h__</span>
00010 <span class="preprocessor"></span><span class="preprocessor">#define __RamBTreeController_h__</span>
00011 <span class="preprocessor"></span>
00012 <span class="preprocessor">#include "BTreeNode.h"</span>
00013 <span class="preprocessor">#include "PlatformTypes.h"</span>
00014 
00018 
00019 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
<a name="l00020"></a><a class="code" href="classRamBTreeController.html">00020</a> <span class="keyword">class </span><a class="code" href="classRamBTreeController.html">RamBTreeController</a>
00021 {
00022 <span class="keyword">public</span>:
00023 
00024         <span class="keyword">typedef</span> <a class="code" href="classBTreeNode.html">BTreeNode&lt; NodeSize, KeyT, DataT &gt;</a> <a class="code" href="classBTreeNode.html">NodeType</a>;
00025 
00026         <a class="code" href="classRamBTreeController.html">RamBTreeController</a>();
00027         <span class="keyword">virtual</span> ~<a class="code" href="classRamBTreeController.html">RamBTreeController</a>();
00028         <span class="keywordtype">bool</span> isOpen();
00029 
00030         <span class="keyword">inline</span> <span class="keywordtype">void</span> flushChanges();
00031         <span class="keyword">inline</span> <span class="keywordtype">void</span> releaseCache();
00032 
00033         <span class="keyword">inline</span> <span class="keywordtype">void</span> setMaxCacheSize( guint cacheSize );
00034         <span class="keyword">inline</span> guint getMaxCacheSize();
00035 
00036         <span class="keyword">inline</span> <span class="keywordtype">void</span> releaseNode( <span class="keywordtype">int</span> addr );
00037         <span class="keyword">inline</span> <span class="keywordtype">bool</span> nodeInCache( <span class="keywordtype">int</span> addr );
00038 
00039         <span class="keywordtype">void</span> assign( <a class="code" href="classRamBTreeController.html">RamBTreeController</a> *copy );
00040 
00041         <span class="keywordtype">void</span> clear();
00042 
00043 <span class="keyword">protected</span>:
00044 
00045         <span class="comment">// Storage related operations</span>
00046         <span class="keyword">inline</span> <a class="code" href="classBTreeNode.html">NodeType</a>* newNode();
00047         <span class="keyword">inline</span> <span class="keywordtype">void</span> deleteNode( <a class="code" href="classBTreeNode.html">NodeType</a> *node );
00048         <span class="keyword">inline</span> <span class="keywordtype">bool</span> loadNode( <a class="code" href="classBTreeNode.html">NodeType</a> **node, <span class="keywordtype">int</span> addr );
00049         <span class="keyword">inline</span> <span class="keywordtype">int</span> rootAddr();
00050         <span class="keyword">inline</span> <span class="keywordtype">void</span> rootAddr( <span class="keywordtype">int</span> addr );
00051 
00052         <span class="keywordtype">void</span> rclear( <a class="code" href="classBTreeNode.html">NodeType</a> *node );
00053 
00054         <span class="keywordtype">void</span> closeController();
00055 
00056         <span class="comment">// Data</span>
00057         <a class="code" href="classBTreeNode.html">NodeType</a> *root_;
00058 
00059 };
00060 
00061 <span class="comment">//      ===================================================================</span>
00062 <span class="comment">//      RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::RamBTreeController</span>
00063 
00064 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
00065 <a class="code" href="classRamBTreeController.html">RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::RamBTreeController</a>() : 
00066         root_( 0 )
00067 {}
00068 
00069 <span class="comment">//      ===================================================================</span>
00070 <span class="comment">//      RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::RamBTreeController</span>
00071 
00072 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
00073 <a class="code" href="classRamBTreeController.html">RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::~RamBTreeController</a>()
00074 {
00075         clear();
00076 }
00077 
00078 <span class="comment">//      ===================================================================</span>
00079 <span class="comment">//      RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::isOpen</span>
00080 
00081 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
00082 <span class="keywordtype">bool</span> <a class="code" href="classRamBTreeController.html">RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::isOpen</a>()
00083 {
00084         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00085 }
00086 
00087 <span class="comment">//      ===================================================================</span>
00088 <span class="comment">//      RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::newNode</span>
00089 
00090 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
00091 <span class="keyword">typename</span> <a class="code" href="classRamBTreeController.html">RamBTreeController&lt; NodeSize, KeyT, DataT &gt;</a>::NodeType* 
00092                 <a class="code" href="classRamBTreeController.html">RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::newNode</a>()
00093 {
00094         NodeType *newnode = <span class="keyword">new</span> NodeType();
00095         newnode-&gt;addr_ = ( <span class="keywordtype">int</span> ) newnode;
00096 
00097         <span class="keywordflow">return</span> newnode;
00098 }
00099 
00100 <span class="comment">//      ===================================================================</span>
00101 <span class="comment">//      RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::deleteNode</span>
00102 
00103 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
00104 <span class="keywordtype">void</span> <a class="code" href="classRamBTreeController.html">RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::deleteNode</a>( NodeType* node )
00105 {
00106         <span class="keyword">delete</span> node;
00107 }
00108 
00109 <span class="comment">//      ===================================================================</span>
00110 <span class="comment">//      RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::loadNode</span>
00111 
00112 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
00113 <span class="keywordtype">bool</span> <a class="code" href="classRamBTreeController.html">RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::loadNode</a>( NodeType **node, <span class="keywordtype">int</span> addr )
00114 {
00115         <span class="keywordflow">if</span> ( !addr )
00116         {
00117                 *node = 0;
00118                 <span class="keywordflow">return</span> <span class="keyword">true</span>;
00119         }
00120 
00121         *node = ( NodeType* ) addr;
00122         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00123 }
00124 
00125 <span class="comment">//      ===================================================================</span>
00126 <span class="comment">//      RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::releaseCache</span>
00127 
00128 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
00129 <span class="keywordtype">void</span> <a class="code" href="classRamBTreeController.html">RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::flushChanges</a>()
00130 {}
00131 
00132 <span class="comment">//      ===================================================================</span>
00133 <span class="comment">//      RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::releaseCache</span>
00134 
00135 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
00136 <span class="keywordtype">void</span> <a class="code" href="classRamBTreeController.html">RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::releaseCache</a>()
00137 {}
00138 
00139 <span class="comment">//      ===================================================================</span>
00140 <span class="comment">//      RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::rootAddr</span>
00141 
00142 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
00143 <span class="keywordtype">int</span> <a class="code" href="classRamBTreeController.html">RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::rootAddr</a>()
00144 {
00145         <span class="keywordflow">return</span> ( <span class="keywordtype">int</span> ) root_;
00146 }
00147 
00148 <span class="comment">//      ===================================================================</span>
00149 <span class="comment">//      RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::closeController</span>
00150 
00151 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
00152 <span class="keywordtype">void</span> <a class="code" href="classRamBTreeController.html">RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::closeController</a>()
00153 {}
00154 
00155 <span class="comment">//      ===================================================================</span>
00156 <span class="comment">//      RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::rootAddr</span>
00157 
00158 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
00159 <span class="keywordtype">void</span> RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::rootAddr( <span class="keywordtype">int</span> addr )
00160 {
00161         root_ = ( NodeType* ) addr;
00162 }
00163 
00164 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
00165 <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRamBTreeController.html">RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::setMaxCacheSize</a>( guint )
00166 {}
00167 
00168 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
00169 <span class="keyword">inline</span> guint <a class="code" href="classRamBTreeController.html">RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::getMaxCacheSize</a>()
00170 {}
00171 
00172 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
00173 <span class="keyword">inline</span> <span class="keywordtype">void</span> <a class="code" href="classRamBTreeController.html">RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::releaseNode</a>( <span class="keywordtype">int</span> )
00174 {}
00175 
00176 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
00177 <span class="keyword">inline</span> <span class="keywordtype">bool</span> <a class="code" href="classRamBTreeController.html">RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::nodeInCache</a>( <span class="keywordtype">int</span> )
00178 {
00179         <span class="keywordflow">return</span> <span class="keyword">true</span>;
00180 }
00181 
00182 <span class="comment">//      ===================================================================</span>
00183 <span class="comment">//      RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::assign</span>
00184 
00185 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
00186 <span class="keywordtype">void</span> <a class="code" href="classRamBTreeController.html">RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::assign</a>( <a class="code" href="classRamBTreeController.html">RamBTreeController</a> *rhv )
00187 {
00188         root_ = rhv-&gt;<a class="code" href="classRamBTreeController.html#p0">root_</a>;
00189         rhv-&gt;<a class="code" href="classRamBTreeController.html#p0">root_</a> = 0;
00190 }
00191 
00192 <span class="comment">//      ===================================================================</span>
00193 <span class="comment">//      RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::clear</span>
00194 
00195 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
00196 <span class="keywordtype">void</span> <a class="code" href="classRamBTreeController.html">RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::clear</a>()
00197 {
00198         rclear( root_ );
00199         root_ = 0;
00200 }
00201 
00202 <span class="comment">//      ===================================================================</span>
00203 <span class="comment">//      RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::rclear</span>
00204 
00205 <span class="keyword">template</span>&lt; <span class="keywordtype">int</span> NodeSize, <span class="keyword">typename</span> KeyT, <span class="keyword">typename</span> DataT &gt;
00206 <span class="keywordtype">void</span> <a class="code" href="classRamBTreeController.html">RamBTreeController&lt; NodeSize, KeyT, DataT &gt;::rclear</a>( NodeType *node )
00207 {
00208         <span class="keywordflow">if</span> ( !node ) <span class="keywordflow">return</span>;
00209 
00210         <span class="keywordflow">if</span> ( node-&gt;less_ )
00211         {
00212                 NodeType *less = 0;
00213 
00214                 <span class="keywordflow">if</span> ( loadNode( &amp;less, node-&gt;less_ ) )
00215                 {
00216                         rclear( less );
00217                 }
00218         }
00219 
00220         <span class="keywordflow">for</span> ( <span class="keywordtype">int</span> i = 0; i &lt; node-&gt;count(); i++ )
00221         {
00222                 <span class="keywordflow">if</span> ( node-&gt;elems_[ i ].link_ )
00223                 {
00224                         NodeType *kid = 0;
00225 
00226                         <span class="keywordflow">if</span> ( loadNode( &amp;kid, node-&gt;elems_[ i ].link_ ) )
00227                         {
00228                                 rclear( kid );
00229                         }
00230                 }
00231         }
00232 
00233         <span class="keyword">delete</span> node;
00234 }
00235 
00236 <span class="preprocessor">#endif // __RamBTreeController_h__</span>
</pre></div><hr size="1"><address style="align: right;"><small>Generated on Thu Oct 18 11:38:50 2007 for EmbeddedFileSystem by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 > 
</a>1.3.4 </small></address>
</body>
</html>
